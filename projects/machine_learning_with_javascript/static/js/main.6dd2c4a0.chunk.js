(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{10:function(e,n,t){e.exports={"fabric-wrapper":"styles_fabric-wrapper__3dS1m",menu:"styles_menu__3HQKo","cls-buttons":"styles_cls-buttons__3H89l","action-buttons":"styles_action-buttons__2tX2A"}},14:function(e,n,t){e.exports={"fabric-wrapper":"styles_fabric-wrapper__2Wu26",menu:"styles_menu__dmKx4","cls-buttons":"styles_cls-buttons__26VZ_"}},28:function(e,n,t){e.exports=t(45)},33:function(e,n,t){},42:function(e,n){},43:function(e,n){},44:function(e,n){},45:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),i=t(20),c=t.n(i),o=(t(33),t(4)),u=t(2),l=t(3);function s(){var e=Object(u.a)(["\n    padding: 5px 40px;\n    background: ",";\n    a {\n      text-decoration: none;\n      color: inherit;\n    }\n"]);return s=function(){return e},e}function f(){var e=Object(u.a)(["\n  list-style-type: none;\n  font-size: 1.3rem;\n"]);return f=function(){return e},e}var d=l.a.ul(f()),m=l.a.li(s(),(function(e){return e.selected?"silver":"auto"}));var p=function(e){var n=e.clickHandler,t=e.selectedChoice,a=e.choices;return r.a.createElement(d,null,a.map((function(e){return r.a.createElement(m,{key:e.id,selected:e.id===t,onClick:function(){return n(e.id)}},r.a.createElement("a",{href:"#".concat(e.path)},e.label))})))},g=t(5);function v(){var e=Object(u.a)(["\n  display: flex;\n  align-items: center;\n  span {\n    font-weight: 600;\n  }\n  input {\n    font-size: 1.1rem;\n    margin-left: 10px;\n  }\n"]);return v=function(){return e},e}var b=l.a.label(v());function h(e){var n=e.className,t=e.type,a=e.label,i=e.value,c=e.step,o=e.min,u=e.max,l=e.onChange;return r.a.createElement(b,{className:n},r.a.createElement("span",null,a),r.a.createElement("input",{step:c,type:t,value:i,min:o,max:u,onChange:function(e){return l(e.target.value)}}))}h.defaultProps={type:void 0};var x=h,O=t(47),y=function(e,n){return O.c(e,n)},E=function(e,n,t,a){for(var r=[],i=0,c=0;c<n.length;++c)r.push(y(e,n[c])-t[c]),i+=r[c]*r[c];var o=e.map((function(e,t){var a=n.map((function(e){return e[t]}));return O.c(r,a)}));return{cost:i,coefficients:O.a(e,O.f(o,-a))}},j=function(e,n){return{dataset:e.map((function(e){return e.map((function(e,t){var a=n[t];return a.min+e*(a.max-a.min+1)}))}))}},w=function(e){var n={};return O.h(e).forEach((function(e,t){var a,r=(a=e,{min:O.e(a),max:O.d(a)});n[t]=r})),{dataset:e.map((function(e){return e.map((function(e,t){var a=n[t];return(e-a.min)/(a.max-a.min+1)}))})),featureMeta:n}},k=t(9),C=t.n(k);function _(){var e=Object(u.a)(["\n  display: flex;\n  height: 100%;\n  "," > span {\n    width: 110px;\n  }\n"]);return _=function(){return e},e}function S(){var e=Object(u.a)([""]);return S=function(){return e},e}function M(){var e=Object(u.a)(["\n  padding: 10px 20px;\n"]);return M=function(){return e},e}function L(){var e=Object(u.a)(["\n  min-width: 30px;\n  min-height: 30px;\n  max-width: 30px;\n  max-height: 30px;\n  cursor: pointer;\n  &:focus {\n    outline: none;\n  }\n  color: ",";\n  background: ",";\n  border-radius: 50%;\n  border: ",";\n"]);return L=function(){return e},e}var W=[],R=[];var N=function(e,n){return new Array(n+1).fill(0).map((function(n,t){return Math.pow(e,t)}))},A={trainingData:[],trainingOutput:[],coefficients:[],featureMeta:{}},H={regressionLines:[],segmentCount:500};function I(e,n,t,a){var r=w(W.map((function(e){return[e]}))),i=w(R.map((function(e){return[e]})));if(A.trainingData=r.dataset.map((function(e){return N(e[0],a)})),A.trainingOutput=i.dataset.reduce((function(e,n){return e.push(n[0]),e}),[]),A.featureMeta=r.featureMeta,A.outputMeta=i.featureMeta[0],A.coefficients=new Array(a+1).fill(0),0===H.regressionLines.length){for(var c=0;c+1<H.segmentCount;++c)H.regressionLines.push(new g.fabric.Line),e.add(H.regressionLines[c]);H.message=new g.fabric.Text(""),e.add(H.message)}!function r(){(function(e,n,t,a){var r=A.trainingData,i=A.trainingOutput,c=A.coefficients,o=A.featureMeta,u=A.outputMeta,l=E(c,r,i,t);A.coefficients=l.coefficients;for(var s=[],f=[],d=H.segmentCount,m=H.regressionLines,p=0;p<d;++p){var g=0===p?-10:20*p/(d-1)-10;s.push([g]);var v=N(g,a);f.push(y(c,v))}H.message.set({text:"Iterations Left: ".concat(n)});for(var b=j(s,o),h=j(f.map((function(e){return[e]})),{0:u}),x=b.dataset,O=h.dataset.reduce((function(e,n){return e.push(n[0]),e}),[]),w=0;w+1<d;++w){m[w].set({stroke:["red","green"][w%2],strokeWidth:2,objectCaching:!1,x1:x[w][0],y1:O[w],x2:x[w+1][0],y2:O[w+1]})}l.cost})(0,--n,t,a),e.renderAll(),0!==n&&(H.animFrameId=window.requestAnimationFrame(r))}()}function D(){cancelAnimationFrame(H.animFrameId)}var F=l.a.button(L(),(function(e){return e.color}),(function(e){return e.color}),(function(e){return"8px solid ".concat(e.selected?"rgba(0, 0, 0, .5)":"currentColor")})),q=l.a.button(M()),B=Object(l.a)(x)(S()),P=l.a.div(_(),B);var z=function(){var e=Object(a.useRef)(null),n=Object(a.useState)(null),t=Object(o.a)(n,2),i=t[0],c=t[1],u=Object(a.useRef)({class:"green"}),l=function(){D(),W=[],R=[],H.regressionLines=[],H.message=void 0,i&&i.clear()};Object(a.useEffect)((function(){var n=e.current,t=document.createElement("canvas");t.id="canvas",n.append(t);var a=n.getBoundingClientRect(),r=new g.fabric.Canvas("canvas");return r.setWidth(a.width),r.setHeight(a.height),function(e,n){e.on({"mouse:down":function(t){var a=t.pointer.x,r=t.pointer.y;W.push(a),R.push(r);var i=new g.fabric.Circle({left:a-10,top:r-10,radius:4,stroke:n.class,strokeWidth:20,fill:""});e.add(i)}})}(r,u.current),c(r),function(){l(),r.dispose()}}),[]);var s=Object(a.useState)("green"),f=Object(o.a)(s,2),d=f[0],m=f[1],p=Object(a.useState)(1e4),v=Object(o.a)(p,2),b=v[0],h=v[1],x=Object(a.useState)(.1),O=Object(o.a)(x,2),y=O[0],E=O[1],j=Object(a.useState)(1),w=Object(o.a)(j,2),k=w[0],_=w[1];return r.a.createElement(P,null,r.a.createElement("div",{ref:e,className:C.a["fabric-wrapper"]}),r.a.createElement("div",{className:C.a.menu},r.a.createElement("div",{className:C.a["cls-buttons"]},r.a.createElement(F,{color:"green",selected:"green"===d,onClick:function(){return function(e){var n=e;m(n),u.current.class=n}("green")}}),r.a.createElement("span",null,"Click on middle window to create a point")),r.a.createElement("div",{className:C.a["action-buttons"]},r.a.createElement(q,{onClick:function(){0!==W.length?(D(),I(i,b,y,k)):alert("please add some points")}},"Solve"),r.a.createElement(q,{onClick:D},"Stop"),r.a.createElement(q,{onClick:l},"Reset")),r.a.createElement(B,{type:"number",label:"Iterations",value:""+b,onChange:function(e){return h(+e)}}),r.a.createElement(B,{type:"number",label:"Learning Rate",value:""+y,onChange:function(e){return E(+e)}}),r.a.createElement(B,{type:"number",label:"Degree",value:""+k,onChange:function(e){return _(+e)}})))},J=t(12),K=t(26),T=t(13),Z=function(e,n){return O.c(e,n)},G=function(e,n,t,a){for(var r=[],i=0,c=Object(T.a)(e),o=0;o<n.length;++o){var u=Z(c,n[o]),l=(u>=a.margin?1:u<=-a.margin?-1:-t[o])-t[o];0!==l&&(console.log("error",o),c=O.a(c,O.f(-a.learningRate*l,n[o])),i+=r[o]*r[o])}return{cost:i,coefficients:c}},Q=t(10),V=t.n(Q);function X(){var e=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  span {\n    font-weight: 600;\n  }\n  > * + * {\n    margin-top: 10px;\n  }\n  label {\n    margin-left: 20px;\n    font-size: 1.1rem;\n    span {\n      margin-left: 10px;\n    }\n  }\n"]);return X=function(){return e},e}var $=l.a.label(X());function U(e){var n=e.className,t=e.label,a=e.nameSelector,i=e.titleSelector,c=e.valueSelector,o=e.options,u=e.onChange;return r.a.createElement($,{className:n},r.a.createElement("span",null,t),o.map((function(e){return r.a.createElement("label",{key:a(e)},r.a.createElement("input",{onChange:function(n){return u(a(e),!c(e))},type:"checkbox",checked:c(e)}),r.a.createElement("span",null,i(e)))})))}U.defaultProps={type:void 0,onChange:function(){}};var Y=U;function ee(){var e=Object(u.a)(["\n  display: flex;\n  height: 100%;\n  "," span {\n    width: 110px;\n  }\n"]);return ee=function(){return e},e}function ne(){var e=Object(u.a)(["\n  padding: 10px 20px;\n"]);return ne=function(){return e},e}function te(){var e=Object(u.a)([""]);return te=function(){return e},e}function ae(){var e=Object(u.a)(["\n  min-width: 30px;\n  min-height: 30px;\n  max-width: 30px;\n  max-height: 30px;\n  cursor: pointer;\n  &:focus {\n    outline: none;\n  }\n  color: ",";\n  background: ",";\n  border-radius: 50%;\n  border: ",";\n"]);return ae=function(){return e},e}var re=[],ie=[];var ce={trainingData:[],trainingOutput:[],coefficients:[],featureMeta:{}},oe={regressionLines:[]},ue=function(e,n){for(var t=function(t){var a=n.indexOf("y*y");if(-1===a)return function(t){var a=e[0]+e[1]*t,r=n.indexOf("x*x"),i=n.indexOf("x*x*x"),c=n.indexOf("x*y");-1!==r&&(a+=e[r+3]*t*t),-1!==i&&(a+=e[i+3]*t*t*t);var o=e[2];return-1!==c&&(o+=e[c+3]*t),[[t,-a/o]]}(t);var r=n.indexOf("x*y"),i=n.indexOf("x*x"),c=n.indexOf("x*x*x"),o=e[0]+e[1]*t;-1!==i&&(o+=e[i+3]*t*t),-1!==c&&(o+=e[c+3]*t*t*t);var u=e[a+3],l=e[2];-1!==r&&(l+=e[r+3]*t);var s=l*l-4*u*o;if(s<0)return[];var f=Math.sqrt(s);return[[t,(-l+f)/(2*u)],[t,(-l-f)/(2*u)]]},a=[[]],r=[[]],i=0,c=-5;c<=5;c+=.005){var o=t(c);o.length>0?(a[i].push(o[0]),o[1]&&r[i].push(o[1])):1===a.length&&(a.push([]),r.push([]),i++)}var u=function(e,n){return n.length!==e.length||0===e.length?e:O.b(e[0],n[0])<O.b(e[e.length-1],n[n.length-1])?e.reverse().concat(n):e.concat(n.reverse())};return{points1:u(a[0],r[0]),points2:a.length<2?[]:u(a[1],r[1])}};function le(e,n,t,a){function r(e){var n=[1].concat(Object(T.a)(e)),t={"x*x":function(e){return e[0]*e[0]},"x*y":function(e){return e[0]*e[1]},"y*y":function(e){return e[1]*e[1]},"x*x*x":function(e){return e[0]*e[0]*e[0]}};console.log(a);var r=a.map((function(n){return t[n](e)}));return n.concat(r)}var i=r([0,0]).length,c=w(re);ce.trainingData=c.dataset.map(r),ce.trainingOutput=ie,ce.featureMeta=c.featureMeta,ce.coefficients=new Array(i).fill(0),oe.message||(oe.message=new g.fabric.Text(""),e.add(oe.message));!function r(){n--,function(e,n,t,a){var r=ce.trainingData,i=ce.trainingOutput,c=ce.coefficients,o=ce.featureMeta,u=G(c,r,i,t);ce.coefficients=u.coefficients;var l=oe.regressionLines;for(oe.message.set({text:"Iterations Left: ".concat(n)});l.length;)e.remove(l.pop());var s=ue(ce.coefficients,a);[s.points1,s.points2].forEach((function(n){var t=j(n,o);n.forEach((function(n,a){if(0!==a){var r=t.dataset[a],i=t.dataset[a-1],c=new g.fabric.Line;l.push(c),e.add(c),c.set({stroke:["red","green"][a%2],strokeWidth:2,objectCaching:!1,x1:r[0],y1:r[1],x2:i[0],y2:i[1]})}}))})),u.cost}(e,n,t,a),e.renderAll(),0!==n&&(oe.animFrameId=window.requestAnimationFrame(r))}()}function se(){cancelAnimationFrame(oe.animFrameId)}var fe=l.a.button(ae(),(function(e){return e.color}),(function(e){return e.color}),(function(e){return"8px solid ".concat(e.selected?"rgba(0, 0, 0, .5)":"currentColor")})),de=Object(l.a)(x)(te()),me=l.a.button(ne()),pe=l.a.div(ee(),de);var ge=function(){var e=Object(a.useRef)(null),n=Object(a.useState)(null),t=Object(o.a)(n,2),i=t[0],c=t[1],u=Object(a.useRef)({class:"green"}),l=function(){se(),re=[],ie=[],oe.regressionLines=[],oe.message=void 0,i&&i.clear()};Object(a.useEffect)((function(){var n=e.current,t=document.createElement("canvas");t.id="canvas",n.append(t);var a=n.getBoundingClientRect(),r=new g.fabric.Canvas("canvas");return r.setWidth(a.width),r.setHeight(a.height),function(e,n){e.on({"mouse:down":function(t){var a=t.pointer.x,r=t.pointer.y;re.push([a,r]),ie.push("green"===n.class?1:-1);var i=new g.fabric.Circle({left:a-10,top:r-10,radius:3,stroke:n.class,strokeWidth:17,fill:""});e.add(i)}})}(r,u.current),c(r),function(){l(),r.dispose()}}),[]);var s=Object(a.useState)("green"),f=Object(o.a)(s,2),d=f[0],m=f[1],p=Object(a.useState)(1e4),v=Object(o.a)(p,2),b=v[0],h=v[1],x=Object(a.useState)(.001),O=Object(o.a)(x,2),y=O[0],E=O[1],j=Object(a.useState)(.001),w=Object(o.a)(j,2),k=w[0],C=w[1],_=function(e){var n=e;m(n),u.current.class=n},S=Object(a.useState)({"x*y":!1,"x*x":!1,"y*y":!1,"x*x*x":!1}),M=Object(o.a)(S,2),L=M[0],W=M[1];return r.a.createElement(pe,null,r.a.createElement("div",{ref:e,className:V.a["fabric-wrapper"]}),r.a.createElement("div",{className:V.a.menu},r.a.createElement("div",{className:V.a["cls-buttons"]},r.a.createElement(fe,{color:"green",selected:"green"===d,onClick:function(){return _("green")}}),r.a.createElement(fe,{color:"red",selected:"red"===d,onClick:function(){return _("red")}}),r.a.createElement("span",null,"Select the class and ",r.a.createElement("br",null),"click on middle window to drop")),r.a.createElement("div",{className:V.a["action-buttons"]},r.a.createElement(me,{onClick:function(){if(0!==re.length){var e=ie.filter((function(e){return 1===e})).length,n=ie.length-e;if(0!==e&&0!==n)se(),le(i,b,{learningRate:y,margin:k},Object.keys(L).filter((function(e){return L[e]})));else alert("training set must contain both red and green classes")}else alert("please add some points")}},"Solve"),r.a.createElement(me,{onClick:se},"Stop"),r.a.createElement(me,{onClick:l},"Reset")),r.a.createElement(de,{type:"number",label:"Iterations",value:""+b,onChange:function(e){return h(+e)}}),r.a.createElement(de,{type:"number",step:"0.00000001",label:"Learning Rate",value:""+y,onChange:function(e){return E(+e)}}),r.a.createElement(de,{type:"number",step:"0.00000001",label:"Margin",value:""+k,onChange:function(e){return C(+e)}}),r.a.createElement(Y,{label:"Additional features for non-linear classification",nameSelector:function(e){return e.name},onChange:function(e,n){W(Object(K.a)({},L,Object(J.a)({},e,n)))},valueSelector:function(e){return e.value},titleSelector:function(e){return e.name},options:[{name:"x*y",value:L["x*y"]},{name:"x*x",value:L["x*x"]},{name:"y*y",value:L["y*y"]},{name:"x*x*x",value:L["x*x*x"]}]})))},ve=t(14),be=t.n(ve);function he(){var e=Object(u.a)(["\n  > span {\n    display: block;\n    margin-top: 5px;\n    margin-left: 90px;\n  }\n  > * + * {\n    margin-top: 20px;\n  }\n"]);return he=function(){return e},e}function xe(){var e=Object(u.a)(["\n  display: flex;\n  height: 100%;\n"]);return xe=function(){return e},e}function Oe(){var e=Object(u.a)(["\n  > span {\n    width: 80px;\n  }\n  > input {\n    flex: 1;\n  }\n"]);return Oe=function(){return e},e}var ye,Ee,je=Object(l.a)(x)(Oe()),we=l.a.div(xe()),ke=l.a.div(he()),Ce=function(e,n,t){var a=e.getWidth(),r=e.getHeight(),i=Math.PI*n/180,c=Math.hypot(a,r),o=[Math.cos(-i),Math.sin(-i)],u=[a/2,r/2],l=O.a(u,O.f(o,t)),s=O.f([-o[1],o[0]],c/2),f=O.a(l,s),d=O.g(l,s);ye.set({stroke:"blue",strokeWidth:3,objectCaching:!1,x1:f[0],y1:f[1],x2:d[0],y2:d[1]}),Ee.set({stroke:"black",strokeWidth:1,objectCaching:!1,x1:u[0],y1:u[1],x2:l[0],y2:l[1]}),e.renderAll()};var _e=function(){var e=Object(a.useRef)(null),n=Object(a.useState)(null),t=Object(o.a)(n,2),i=t[0],c=t[1],u=Object(a.useState)(45),l=Object(o.a)(u,2),s=l[0],f=l[1],d=Object(a.useState)(300),m=Object(o.a)(d,2),p=m[0],v=m[1],b=Object(a.useState)(Math.floor(Math.hypot(window.innerHeight,window.innerWidth)/2)),h=Object(o.a)(b,1)[0];return Object(a.useEffect)((function(){var n=e.current,t=document.createElement("canvas");t.id="canvas",n.append(t);var a=n.getBoundingClientRect(),r=new g.fabric.Canvas("canvas");return r.setWidth(a.width),r.setHeight(a.height),c(r),function(e){var n=e.getWidth(),t=e.getHeight(),a=new g.fabric.Line;a.set({stroke:"green",strokeWidth:2,objectCaching:!1,x1:0,y1:t/2,x2:n,y2:t/2}),e.add(a);var r=new g.fabric.Line;r.set({stroke:"green",strokeWidth:2,objectCaching:!1,x1:n/2,y1:0,x2:n/2,y2:t}),e.add(r)}(r),ye=new g.fabric.Line,r.add(ye),Ee=new g.fabric.Line,r.add(Ee),Ce(r,s,p),function(){r.dispose()}}),[]),r.a.createElement(we,null,r.a.createElement("div",{ref:e,className:be.a["fabric-wrapper"]}),r.a.createElement("div",{className:be.a.menu},r.a.createElement("div",{className:be.a["cls-buttons"]},r.a.createElement("span",null,"A line can be described using an angle ",r.a.createElement("br",null)," for orientation and distance from origin")),r.a.createElement(ke,null,r.a.createElement(je,{label:"Angle",type:"range",value:""+s,min:"0",max:"360",onChange:function(e){return f(n=+e),void Ce(i,n,p);var n}}),r.a.createElement("span",null,s," degrees"),r.a.createElement(je,{label:"Distance",type:"range",value:""+p,min:""+-h,max:""+h,onChange:function(e){return v(n=+e),void Ce(i,s,n);var n}}),r.a.createElement("span",null,p," px"))))};function Se(){var e=Object(u.a)(["\n  display: grid;\n  width: 100vw;\n  height: 100vh;\n  grid-template-areas:\n  'header header'\n  'nav main';\n  grid-template-columns: auto 1fr;\n  grid-template-rows: auto 1fr;\n  grid-gap: 0px;\n\n  header {\n    grid-area: header;\n    background: lightblue;\n    box-shadow: 0px 1px 2px black;\n  }\n\n  nav {\n    grid-area: nav;\n    box-shadow: 0px 1px 2px black;\n  }\n\n  main {\n    grid-area: main;\n  }\n\n  header, nav {\n    padding: 10px;\n  }\n"]);return Se=function(){return e},e}var Me=l.a.div(Se());var Le=function(){var e=Object(a.useState)("perceptron"),n=Object(o.a)(e,2),t=n[0],i=n[1];return r.a.createElement(Me,null,r.a.createElement("header",null,r.a.createElement("h1",null,"Machine Learning from Scratch")),r.a.createElement("nav",null,r.a.createElement(p,{selectedChoice:t,clickHandler:function(e){i(e)},choices:[{id:"line",label:"Equation of Line",path:"/line_equation"},{id:"regression",label:"Regression",path:"/regression"},{id:"perceptron",label:"Perceptron",path:"/perceptron"}]})),r.a.createElement("main",null,"line"===t&&r.a.createElement(_e,null),"regression"===t&&r.a.createElement(z,null),"perceptron"===t&&r.a.createElement(ge,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(Le,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},9:function(e,n,t){e.exports={"fabric-wrapper":"styles_fabric-wrapper__3GokR",menu:"styles_menu__2e9qZ","cls-buttons":"styles_cls-buttons__2evW2","action-buttons":"styles_action-buttons__1-DFx"}}},[[28,1,2]]]);
//# sourceMappingURL=main.6dd2c4a0.chunk.js.map