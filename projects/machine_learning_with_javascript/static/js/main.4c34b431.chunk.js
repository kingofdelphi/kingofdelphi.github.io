(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{10:function(e,n,t){e.exports={"fabric-wrapper":"styles_fabric-wrapper__3dS1m",menu:"styles_menu__3HQKo","cls-buttons":"styles_cls-buttons__3H89l","action-buttons":"styles_action-buttons__2tX2A"}},13:function(e,n,t){e.exports={"fabric-wrapper":"styles_fabric-wrapper__2Wu26",menu:"styles_menu__dmKx4","cls-buttons":"styles_cls-buttons__26VZ_"}},26:function(e,n,t){e.exports=t(43)},31:function(e,n,t){},40:function(e,n){},41:function(e,n){},42:function(e,n){},43:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),i=t(19),c=t.n(i),o=(t(31),t(4)),u=t(2),s=t(3);function l(){var e=Object(u.a)(["\n    padding: 5px 40px;\n    background: ",";\n    a {\n      text-decoration: none;\n      color: inherit;\n    }\n"]);return l=function(){return e},e}function f(){var e=Object(u.a)(["\n  list-style-type: none;\n  font-size: 1.3rem;\n"]);return f=function(){return e},e}var d=s.a.ul(f()),m=s.a.li(l(),(function(e){return e.selected?"silver":"auto"}));var p=function(e){var n=e.clickHandler,t=e.selectedChoice,a=e.choices;return r.a.createElement(d,null,a.map((function(e){return r.a.createElement(m,{key:e.id,selected:e.id===t,onClick:function(){return n(e.id)}},r.a.createElement("a",{href:"#".concat(e.path)},e.label))})))},g=t(5);function h(){var e=Object(u.a)(["\n  display: flex;\n  align-items: center;\n  span {\n    font-weight: 600;\n  }\n  input {\n    font-size: 1.1rem;\n    margin-left: 10px;\n  }\n"]);return h=function(){return e},e}var b=s.a.label(h());function v(e){var n=e.className,t=e.type,a=e.label,i=e.value,c=e.min,o=e.max,u=e.onChange;return r.a.createElement(b,{className:n},r.a.createElement("span",null,a),r.a.createElement("input",{type:t,value:i,min:c,max:o,onChange:function(e){return u(e.target.value)}}))}v.defaultProps={type:void 0};var x=v,E=t(45),w=function(e,n){return E.c(e,n)},j=function(e,n,t,a){for(var r=[],i=0,c=0;c<n.length;++c)r.push(w(e,n[c])-t[c]),i+=r[c]*r[c];var o=e.map((function(e,t){var a=n.map((function(e){return e[t]}));return E.c(r,a)}));return{cost:i,coefficients:E.a(e,E.f(o,-a))}},O=function(e,n){return{dataset:e.map((function(e){return e.map((function(e,t){var a=n[t];return a.min+e*(a.max-a.min+1)}))}))}},y=function(e){var n={};return E.h(e).forEach((function(e,t){var a,r=(a=e,{min:E.e(a),max:E.d(a)});n[t]=r})),{dataset:e.map((function(e){return e.map((function(e,t){var a=n[t];return(e-a.min)/(a.max-a.min+1)}))})),featureMeta:n}},k=t(9),C=t.n(k);function _(){var e=Object(u.a)(["\n  display: flex;\n  height: 100%;\n  "," > span {\n    width: 110px;\n  }\n"]);return _=function(){return e},e}function L(){var e=Object(u.a)([""]);return L=function(){return e},e}function M(){var e=Object(u.a)(["\n  padding: 10px 20px;\n"]);return M=function(){return e},e}function S(){var e=Object(u.a)(["\n  min-width: 30px;\n  min-height: 30px;\n  max-width: 30px;\n  max-height: 30px;\n  cursor: pointer;\n  &:focus {\n    outline: none;\n  }\n  color: ",";\n  background: ",";\n  border-radius: 50%;\n  border: ",";\n"]);return S=function(){return e},e}var W=[],R=[];var A=function(e,n){return new Array(n+1).fill(0).map((function(n,t){return Math.pow(e,t)}))},N={trainingData:[],trainingOutput:[],coefficients:[],featureMeta:{}},H={regressionLines:[],segmentCount:500};function I(e,n,t,a){var r=y(W.map((function(e){return[e]}))),i=y(R.map((function(e){return[e]})));if(N.trainingData=r.dataset.map((function(e){return A(e[0],a)})),N.trainingOutput=i.dataset.reduce((function(e,n){return e.push(n[0]),e}),[]),N.featureMeta=r.featureMeta,N.outputMeta=i.featureMeta[0],N.coefficients=new Array(a+1).fill(0),0===H.regressionLines.length){for(var c=0;c+1<H.segmentCount;++c)H.regressionLines.push(new g.fabric.Line),e.add(H.regressionLines[c]);H.message=new g.fabric.Text(""),e.add(H.message)}!function r(){(function(e,n,t,a){var r=N.trainingData,i=N.trainingOutput,c=N.coefficients,o=N.featureMeta,u=N.outputMeta,s=j(c,r,i,t);N.coefficients=s.coefficients;for(var l=[],f=[],d=H.segmentCount,m=H.regressionLines,p=0;p<d;++p){var g=0===p?-10:20*p/(d-1)-10;l.push([g]);var h=A(g,a);f.push(w(c,h))}H.message.set({text:"Iterations Left: ".concat(n)});for(var b=O(l,o),v=O(f.map((function(e){return[e]})),{0:u}),x=b.dataset,E=v.dataset.reduce((function(e,n){return e.push(n[0]),e}),[]),y=0;y+1<d;++y){m[y].set({stroke:["red","green"][y%2],strokeWidth:2,objectCaching:!1,x1:x[y][0],y1:E[y],x2:x[y+1][0],y2:E[y+1]})}s.cost})(0,--n,t,a),e.renderAll(),0!==n&&(H.animFrameId=window.requestAnimationFrame(r))}()}function D(){cancelAnimationFrame(H.animFrameId)}var F=s.a.button(S(),(function(e){return e.color}),(function(e){return e.color}),(function(e){return"8px solid ".concat(e.selected?"rgba(0, 0, 0, .5)":"currentColor")})),q=s.a.button(M()),B=Object(s.a)(x)(L()),P=s.a.div(_(),B);var z=function(){var e=Object(a.useRef)(null),n=Object(a.useState)(null),t=Object(o.a)(n,2),i=t[0],c=t[1],u=Object(a.useRef)({class:"green"}),s=function(){D(),W=[],R=[],H.regressionLines=[],H.message=void 0,i&&i.clear()};Object(a.useEffect)((function(){var n=e.current,t=document.createElement("canvas");t.id="canvas",n.append(t);var a=n.getBoundingClientRect(),r=new g.fabric.Canvas("canvas");return r.setWidth(a.width),r.setHeight(a.height),function(e,n){e.on({"mouse:down":function(t){var a=t.pointer.x,r=t.pointer.y;W.push(a),R.push(r);var i=new g.fabric.Circle({left:a-10,top:r-10,radius:4,stroke:n.class,strokeWidth:20,fill:""});e.add(i)}})}(r,u.current),c(r),function(){s(),r.dispose()}}),[]);var l=Object(a.useState)("green"),f=Object(o.a)(l,2),d=f[0],m=f[1],p=Object(a.useState)(1e4),h=Object(o.a)(p,2),b=h[0],v=h[1],x=Object(a.useState)(.1),E=Object(o.a)(x,2),w=E[0],j=E[1],O=Object(a.useState)(1),y=Object(o.a)(O,2),k=y[0],_=y[1];return r.a.createElement(P,null,r.a.createElement("div",{ref:e,className:C.a["fabric-wrapper"]}),r.a.createElement("div",{className:C.a.menu},r.a.createElement("div",{className:C.a["cls-buttons"]},r.a.createElement(F,{color:"green",selected:"green"===d,onClick:function(){return function(e){var n=e;m(n),u.current.class=n}("green")}}),r.a.createElement("span",null,"Click on middle window to create a point")),r.a.createElement("div",{className:C.a["action-buttons"]},r.a.createElement(q,{onClick:function(){0!==W.length?(D(),I(i,b,w,k)):alert("please add some points")}},"Solve"),r.a.createElement(q,{onClick:D},"Stop"),r.a.createElement(q,{onClick:s},"Reset")),r.a.createElement(B,{type:"number",label:"Iterations",value:""+b,onChange:function(e){return v(+e)}}),r.a.createElement(B,{type:"number",label:"Learning Rate",value:""+w,onChange:function(e){return j(+e)}}),r.a.createElement(B,{type:"number",label:"Degree",value:""+k,onChange:function(e){return _(+e)}})))},J=t(12),K=function(e,n){return E.c(e,n)>=0?1:-1},T=function(e,n,t,a){for(var r=[],i=0,c=Object(J.a)(e),o=0;o<n.length;++o){var u=K(c,n[o])-t[o];0!==u&&(console.log("error",o),c=E.a(c,E.f(-a*u,n[o])),i+=r[o]*r[o])}return{cost:i,coefficients:c}},Z=t(10),G=t.n(Z);function Q(){var e=Object(u.a)(["\n  display: flex;\n  height: 100%;\n  "," span {\n    width: 110px;\n  }\n"]);return Q=function(){return e},e}function V(){var e=Object(u.a)(["\n  padding: 10px 20px;\n"]);return V=function(){return e},e}function X(){var e=Object(u.a)([""]);return X=function(){return e},e}function $(){var e=Object(u.a)(["\n  min-width: 30px;\n  min-height: 30px;\n  max-width: 30px;\n  max-height: 30px;\n  cursor: pointer;\n  &:focus {\n    outline: none;\n  }\n  color: ",";\n  background: ",";\n  border-radius: 50%;\n  border: ",";\n"]);return $=function(){return e},e}var U=[],Y=[];var ee={trainingData:[],trainingOutput:[],coefficients:[],featureMeta:{}},ne={regressionLines:[]};function te(e){return[1].concat(Object(J.a)(e),[e[0]*e[0],e[1]*e[1]])}function ae(e,n,t){var a=ee.trainingData,r=ee.trainingOutput,i=ee.coefficients,c=ee.featureMeta,o=T(i,a,r,t);ee.coefficients=o.coefficients;var u=ne.regressionLines;for(ne.message.set({text:"Iterations Left: ".concat(n)});u.length;)e.remove(u.pop());var s=function(e){for(var n=function(n){var t=e[0]+e[1]*n+e[3]*n*n,a=e[4],r=e[2],i=r*r-4*a*t;if(i<0)return[];var c=Math.sqrt(i);return[[n,(-r+c)/(2*a)],[n,(-r-c)/(2*a)]]},t=[[]],a=[[]],r=0,i=-10;i<=10;i+=.005){var c=n(i);c.length>0?(t[r].push(c[0]),c[1]&&a[r].push(c[1])):1===t.length&&(t.push([]),a.push([]),r++)}var o=function(e,n){return n.length!==e.length||0===e.length?e:E.b(e[0],n[0])<E.b(e[e.length-1],n[n.length-1])?e.reverse().concat(n):e.concat(n.reverse())};return{points1:o(t[0],a[0]),points2:t.length<2?[]:o(t[1],a[1])}}(ee.coefficients);return[s.points1,s.points2].forEach((function(n){var t=O(n,c);n.forEach((function(n,a){if(0!==a){var r=t.dataset[a],i=t.dataset[a-1],c=new g.fabric.Line;u.push(c),e.add(c),c.set({stroke:["red","green"][a%2],strokeWidth:2,objectCaching:!1,x1:r[0],y1:r[1],x2:i[0],y2:i[1]})}}))})),o.cost}function re(){cancelAnimationFrame(ne.animFrameId)}var ie=s.a.button($(),(function(e){return e.color}),(function(e){return e.color}),(function(e){return"8px solid ".concat(e.selected?"rgba(0, 0, 0, .5)":"currentColor")})),ce=Object(s.a)(x)(X()),oe=s.a.button(V()),ue=s.a.div(Q(),ce);var se=function(){var e=Object(a.useRef)(null),n=Object(a.useState)(null),t=Object(o.a)(n,2),i=t[0],c=t[1],u=Object(a.useRef)({class:"green"}),s=function(){re(),U=[],Y=[],ne.regressionLines=[],ne.message=void 0,i&&i.clear()};Object(a.useEffect)((function(){var n=e.current,t=document.createElement("canvas");t.id="canvas",n.append(t);var a=n.getBoundingClientRect(),r=new g.fabric.Canvas("canvas");return r.setWidth(a.width),r.setHeight(a.height),function(e,n){e.on({"mouse:down":function(t){var a=t.pointer.x,r=t.pointer.y;U.push([a,r]),Y.push("green"===n.class?1:-1);var i=new g.fabric.Circle({left:a-10,top:r-10,radius:3,stroke:n.class,strokeWidth:17,fill:""});e.add(i)}})}(r,u.current),c(r),function(){s(),r.dispose()}}),[]);var l=Object(a.useState)("green"),f=Object(o.a)(l,2),d=f[0],m=f[1],p=Object(a.useState)(1e4),h=Object(o.a)(p,2),b=h[0],v=h[1],x=Object(a.useState)(.001),E=Object(o.a)(x,2),w=E[0],j=E[1],O=function(e){var n=e;m(n),u.current.class=n};return r.a.createElement(ue,null,r.a.createElement("div",{ref:e,className:G.a["fabric-wrapper"]}),r.a.createElement("div",{className:G.a.menu},r.a.createElement("div",{className:G.a["cls-buttons"]},r.a.createElement(ie,{color:"green",selected:"green"===d,onClick:function(){return O("green")}}),r.a.createElement(ie,{color:"red",selected:"red"===d,onClick:function(){return O("red")}}),r.a.createElement("span",null,"Select the class and ",r.a.createElement("br",null),"click on middle window to drop")),r.a.createElement("div",{className:G.a["action-buttons"]},r.a.createElement(oe,{onClick:function(){if(0!==U.length){var e=Y.filter((function(e){return 1===e})).length,n=Y.length-e;0!==e&&0!==n?(re(),function(e,n,t){var a=te([0,0]).length,r=y(U);ee.trainingData=r.dataset.map(te),ee.trainingOutput=Y,ee.featureMeta=r.featureMeta,ee.coefficients=new Array(a).fill(0),ne.message||(ne.message=new g.fabric.Text(""),e.add(ne.message)),function a(){n--,ae(e,n,t),e.renderAll(),0!==n&&(ne.animFrameId=window.requestAnimationFrame(a))}()}(i,b,w)):alert("training set must contain both red and green classes")}else alert("please add some points")}},"Solve"),r.a.createElement(oe,{onClick:re},"Stop"),r.a.createElement(oe,{onClick:s},"Reset")),r.a.createElement(ce,{type:"number",label:"Iterations",value:""+b,onChange:function(e){return v(+e)}}),r.a.createElement(ce,{type:"number",label:"Learning Rate",value:""+w,onChange:function(e){return j(+e)}})))},le=t(13),fe=t.n(le);function de(){var e=Object(u.a)(["\n  > span {\n    display: block;\n    margin-top: 5px;\n    margin-left: 90px;\n  }\n  > * + * {\n    margin-top: 20px;\n  }\n"]);return de=function(){return e},e}function me(){var e=Object(u.a)(["\n  display: flex;\n  height: 100%;\n"]);return me=function(){return e},e}function pe(){var e=Object(u.a)(["\n  > span {\n    width: 80px;\n  }\n  > input {\n    flex: 1;\n  }\n"]);return pe=function(){return e},e}var ge,he,be=Object(s.a)(x)(pe()),ve=s.a.div(me()),xe=s.a.div(de()),Ee=function(e,n,t){var a=e.getWidth(),r=e.getHeight(),i=Math.PI*n/180,c=Math.hypot(a,r),o=[Math.cos(-i),Math.sin(-i)],u=[a/2,r/2],s=E.a(u,E.f(o,t)),l=E.f([-o[1],o[0]],c/2),f=E.a(s,l),d=E.g(s,l);ge.set({stroke:"blue",strokeWidth:3,objectCaching:!1,x1:f[0],y1:f[1],x2:d[0],y2:d[1]}),he.set({stroke:"black",strokeWidth:1,objectCaching:!1,x1:u[0],y1:u[1],x2:s[0],y2:s[1]}),e.renderAll()};var we=function(){var e=Object(a.useRef)(null),n=Object(a.useState)(null),t=Object(o.a)(n,2),i=t[0],c=t[1],u=Object(a.useState)(45),s=Object(o.a)(u,2),l=s[0],f=s[1],d=Object(a.useState)(300),m=Object(o.a)(d,2),p=m[0],h=m[1],b=Object(a.useState)(Math.floor(Math.hypot(window.innerHeight,window.innerWidth)/2)),v=Object(o.a)(b,1)[0];return Object(a.useEffect)((function(){var n=e.current,t=document.createElement("canvas");t.id="canvas",n.append(t);var a=n.getBoundingClientRect(),r=new g.fabric.Canvas("canvas");return r.setWidth(a.width),r.setHeight(a.height),c(r),function(e){var n=e.getWidth(),t=e.getHeight(),a=new g.fabric.Line;a.set({stroke:"green",strokeWidth:2,objectCaching:!1,x1:0,y1:t/2,x2:n,y2:t/2}),e.add(a);var r=new g.fabric.Line;r.set({stroke:"green",strokeWidth:2,objectCaching:!1,x1:n/2,y1:0,x2:n/2,y2:t}),e.add(r)}(r),ge=new g.fabric.Line,r.add(ge),he=new g.fabric.Line,r.add(he),Ee(r,l,p),function(){r.dispose()}}),[]),r.a.createElement(ve,null,r.a.createElement("div",{ref:e,className:fe.a["fabric-wrapper"]}),r.a.createElement("div",{className:fe.a.menu},r.a.createElement("div",{className:fe.a["cls-buttons"]},r.a.createElement("span",null,"A line can be described using an angle ",r.a.createElement("br",null)," for orientation and distance from origin")),r.a.createElement(xe,null,r.a.createElement(be,{label:"Angle",type:"range",value:""+l,min:"0",max:"360",onChange:function(e){return f(n=+e),void Ee(i,n,p);var n}}),r.a.createElement("span",null,l," degrees"),r.a.createElement(be,{label:"Distance",type:"range",value:""+p,min:""+-v,max:""+v,onChange:function(e){return h(n=+e),void Ee(i,l,n);var n}}),r.a.createElement("span",null,p," px"))))};function je(){var e=Object(u.a)(["\n  display: grid;\n  width: 100vw;\n  height: 100vh;\n  grid-template-areas:\n  'header header'\n  'nav main';\n  grid-template-columns: auto 1fr;\n  grid-template-rows: auto 1fr;\n  grid-gap: 0px;\n\n  header {\n    grid-area: header;\n    background: lightblue;\n    box-shadow: 0px 1px 2px black;\n  }\n\n  nav {\n    grid-area: nav;\n    box-shadow: 0px 1px 2px black;\n  }\n\n  main {\n    grid-area: main;\n  }\n\n  header, nav {\n    padding: 10px;\n  }\n"]);return je=function(){return e},e}var Oe=s.a.div(je());var ye=function(){var e=Object(a.useState)("line"),n=Object(o.a)(e,2),t=n[0],i=n[1];return r.a.createElement(Oe,null,r.a.createElement("header",null,r.a.createElement("h1",null,"Machine Learning from Scratch")),r.a.createElement("nav",null,r.a.createElement(p,{selectedChoice:t,clickHandler:function(e){i(e)},choices:[{id:"line",label:"Equation of Line",path:"/line_equation"},{id:"regression",label:"Regression",path:"/regression"},{id:"perceptron",label:"Perceptron",path:"/perceptron"}]})),r.a.createElement("main",null,"line"===t&&r.a.createElement(we,null),"regression"===t&&r.a.createElement(z,null),"perceptron"===t&&r.a.createElement(se,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(ye,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},9:function(e,n,t){e.exports={"fabric-wrapper":"styles_fabric-wrapper__3GokR",menu:"styles_menu__2e9qZ","cls-buttons":"styles_cls-buttons__2evW2","action-buttons":"styles_action-buttons__1-DFx"}}},[[26,1,2]]]);
//# sourceMappingURL=main.4c34b431.chunk.js.map